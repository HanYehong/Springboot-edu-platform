<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>个人设置</title>
    <!-- Bootstrap Styles-->
    <link href="../assets/css/bootstrap.css" rel="stylesheet" />
    <!-- FontAwesome Styles-->
    <link href="../assets/css/font-awesome.css" rel="stylesheet" />
    <!-- Custom Styles-->
    <link href="../assets/css/custom-styles.css" rel="stylesheet" />
    <!-- My CSS -->
    <link href="../css/my.css" rel="stylesheet" />
    <!-- Google Fonts-->
    <link href='http://fonts.googleapis.com/css?family=Open+Sans' rel='stylesheet' type='text/css' />
</head>
<body>
<div style="margin-top: 100px; margin-left: 250px;">
    <div>
        <div style="width: 80px; float: left;">
            <span><strong>我的密码</strong></span>
        </div>
        <div style="margin-left: 30px; float: left; width: 170px;">
            <span>******</span>
        </div>
        <div style="margin-left: 10px; float: left;" onclick="showChangePwd()">
            <span style="color: #00bf72;"><strong>修改 ></strong></span>
        </div>
        <br>
        <div style="display: none; margin-left: 110px;" id="change-pwd">
            <input id="old-pwd" type="password" style="width: 200px; margin-top: 10px;" class="form-control" placeholder="原始密码"><br>
            <input id="new-pwd" type="password" style="width: 200px;" class="form-control" placeholder="新密码"><br>
            <input id="new-pwd2" type="password" style="width: 200px;" class="form-control" placeholder="确认密码">
            <span style="margin-left: 10px;color: #F0433D; font-size: 15px; display: none;" id="label-nosame"><strong>两次密码不一致！</strong></span>
            <br>
            <button id="sure-change-pwd" onclick="changePwd()" class="btn btn-success" style="width: 100px; margin-top: 10px;">确认</button>
        </div>
    </div>
    <br>
    <div style="margin-top: 50px;">
        <div style="width: 80px; float: left;">
            <span><strong>我的手机号</strong></span>
        </div>
        <div style="margin-left: 30px; float: left; width: 170px;">
            <span>15189809881</span>
        </div>
        <div style="margin-left: 10px; float: left;">
            <span style="color: #00bf72;"><strong>修改 ></strong></span>
        </div>
    </div>
</div>

<!-- jQuery Js -->
<script src="../assets/js/jquery-1.10.2.js"></script>
<!-- Bootstrap Js -->
<script src="../assets/js/bootstrap.min.js"></script>
<!-- Custom Js -->
<script src="../assets/js/custom-scripts.js"></script>
<script>
    function showChangePwd(){
        if( $("#change-pwd").css("display") == 'none' ) {
            $("#change-pwd").css("display", "");
        }
        else {
            $("#change-pwd").css("display","none");
        }
    }
    $("#new-pwd2").on('change',function () {
        //       alert(1);
        if( $("#new-pwd").val() != $("#new-pwd2").val()){
            $("#label-nosame").css('display','');
        }else{
            $("#label-nosame").css('display','none');
        }
    })
    function changePwd() {
        var oldPwd = $("#old-pwd").val();
        var newPwd = $("#new-pwd").val();
        var newPwd2 = $("#new-pwd2").val();
        if( oldPwd == '' || newPwd == '' || newPwd2 == '' ){
            alert('不能为空！'); return;
        }
        if( newPwd != newPwd2 ){
            alert('两次密码不一致！'); return;
        }
        if( oldPwd != JSON.parse(sessionStorage.getItem("teaInfo")).people.stuPassword ){
            alert('原始密码错误，修改失败！'); return;
        }
        alert('成功！');
        showChangePwd();
        $("#old-pwd").val('');
        $("#new-pwd").val('');
        $("#new-pwd2").val('');
    }

</script>
</body>
</html>